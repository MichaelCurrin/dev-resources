<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <meta property="og:site_name" content="Dev Resources" />

    <title>Dark mode | Dev Resources</title>

    <meta property="og:title" content="Dark mode" />

    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Dark mode" />
<meta name="generator" content="Jekyll v4.3.1" />

<meta property="og:locale" content="en_US" />


    <meta name="description" content="Links to tutorials/articles/docs/Wikipedia about programming languages, developers tools and services" />
    <meta property="og:description" content="Links to tutorials/articles/docs/Wikipedia about programming languages, developers tools and services" />
<meta name="author" content="Michael Currin" />



<link rel="canonical" href="https://michaelcurrin.github.io/dev-resources/resources/javascript/browser/dark-mode.html" />
<meta property="og:url" content="https://michaelcurrin.github.io/dev-resources/resources/javascript/browser/dark-mode.html" />


<script type="application/ld+json">
{
    "name":        "Dev Resources",
    "description": "Links to tutorials/articles/docs/Wikipedia about programming languages, developers tools and services",
    "url":         "https://michaelcurrin.github.io/dev-resources/resources/javascript/browser/dark-mode.html",
    "headline":    "Dark mode",
    "@type":       "WebSite",
    "@context":    "https://schema.org",
    "author": {
        "@type":"Person",
        "name": "Michael Currin"
    }
}
</script>
<link rel="stylesheet" href="/dev-resources/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://michaelcurrin.github.io/dev-resources/feed.xml" title="Dev Resources" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-5XEV3CEPK9"></script>
    <script>
        window['ga-disable-G-5XEV3CEPK9'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-5XEV3CEPK9');
    </script></head>
<body>
<header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/dev-resources/">
            Dev Resources
        </a><nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />

                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path
                                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
                        </svg>
                    </span>
                </label>

                <div class="trigger"><a class="page-link" href="/dev-resources/">
                                Home
                            </a><a class="page-link" href="/dev-resources/resources/">
                                Resources
                            </a><a class="page-link" href="/dev-resources/repos.html">
                                Repos
                            </a><a class="page-link" href="/dev-resources/about.html">
                                About
                            </a></div>
            </nav></div>
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <a id="github-edit" href="https://github.com/MichaelCurrin/dev-resources/edit/master/resources/javascript/browser/dark-mode.md">
    üìù <span>Edit page</span>
</a>

            <a id="github-add" href="https://github.com/MichaelCurrin/dev-resources/new/master/resources/javascript/browser/">
    ‚ûï <span>Add page</span>
</a>


            

<article class="post">
    <header class="post-header">
        <h1 class="post-title">
            


            <span>Dark mode</span>
        </h1>

        
    </header>

    


    <div id="breadcrumbs">

    
        

        
            
            <a href="/dev-resources/resources/">
    Resources
</a>

        
     
        
            /
        

        
            
            <a href="/dev-resources/resources/javascript/">
    JavaScript
</a>

        
     
        
            /
        

        
            
            <a href="/dev-resources/resources/javascript/browser/">
    Browser
</a>

        
     
        
            /
        

        
            <a href="/dev-resources/resources/javascript/browser/dark-mode.html" class="underline">
                Dark mode
            </a>
        
     
    </div>



    <br>

    <div class="post-content">
        
            





<h2 id="css">CSS</h2>

<p>You need to add styling to the <code class="language-plaintext highlighter-rouge">html</code> element so it applies everywhere.</p>

<p>Use the special root selector for this - see CSS <code class="language-plaintext highlighter-rouge">:root</code>.</p>

<p>Set styling for light and dark cases. e.g.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:root</span><span class="nc">.light-theme</span> <span class="p">{</span>
  <span class="py">--background-color-primary</span><span class="p">:</span> <span class="m">#ffffff</span><span class="p">;</span>
  <span class="py">--background-color-secondary</span><span class="p">:</span> <span class="m">#eeeeee</span><span class="p">;</span>
  <span class="py">--accent-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--grey</span><span class="p">);</span>
  <span class="py">--text-primary-color</span><span class="p">:</span> <span class="m">#222</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">:root</span><span class="nc">.dark-theme</span> <span class="p">{</span>
  <span class="py">--background-color-primary</span><span class="p">:</span> <span class="m">#1e1e1e</span><span class="p">;</span>
  <span class="py">--background-color-secondary</span><span class="p">:</span> <span class="m">#3f3f3f</span><span class="p">;</span>
  <span class="py">--accent-color</span><span class="p">:</span> <span class="m">#e4e4e4</span><span class="p">;</span>
  <span class="py">--text-primary-color</span><span class="p">:</span> <span class="m">#f3f3f3</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Then use JS to toggle your class on <code class="language-plaintext highlighter-rouge">html</code> as either <code class="language-plaintext highlighter-rouge">light-theme</code> or <code class="language-plaintext highlighter-rouge">dark-theme</code> value.</p>

<p>Using the root element:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">theme</span><span class="p">;</span>
</code></pre></div></div>

<p>In this case we don‚Äôt have to worry about appending or removing from the class list, as we don‚Äôt want other styles on <code class="language-plaintext highlighter-rouge">html</code> and we want to switch between either one <em>or</em> the other class and not both at once.</p>

<p>If you want to append and remove.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">darkMode</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">dark</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">"</span><span class="s2">dark</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can also use <code class="language-plaintext highlighter-rouge">document.body</code> instead in the CSS and JS, but the root element is preferred.</p>

<h2 id="get-user-preference">Get user preference</h2>

<p>Read the user‚Äôs preference for light or dark mode, as set at the OS or browser level:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">LIGHT_THEME</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">light-theme</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// or "light-mode"</span>
<span class="kd">const</span> <span class="nx">DARK_THEME</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">dark-theme</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">browserPreferedTheme</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">preferDark</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">matchMedia</span><span class="p">(</span><span class="dl">"</span><span class="s2">(prefers-color-scheme: dark)</span><span class="dl">"</span><span class="p">).</span><span class="nx">matches</span><span class="p">;</span>
  
  <span class="k">return</span> <span class="nx">preferDark</span> <span class="p">?</span> <span class="nx">DARK_THEME</span> <span class="p">:</span> <span class="nx">LIGHT_THEME</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="vue">Vue</h2>

<ul>
  <li><a href="https://dev.to/tqbit/create-your-own-dark-mode-toggle-component-with-vue-js-1284">Create your own Dark mode toggle component with Vue</a> - useful to read and set the theme.</li>
  <li><a href="https://darkmode.vue-a11y.com/guide/">DarkMode component through vue-a11y package</a></li>
</ul>

<p>See <a href="https://github.com/MichaelCurrin/badge-generator/blob/master/src/components/ThemeToggle.vue">ThemeToggle.vue</a> in my Vue project for a sample toggle, including use of localStorage.</p>

<h2 id="react">React</h2>

<ul>
  <li><a href="https://duckduckgo.com/?t=ffab&amp;q=react+dark+mode&amp;ia=web">‚Äúreact dark mode‚Äù search</a> with DuckDuckGo.</li>
  <li><a href="https://www.code-boost.com/dark-mode-in-react/">Dark mode in React</a> on Code Boost.</li>
</ul>

<p>Steps:</p>

<ol>
  <li>Dark mode state hook - <code class="language-plaintext highlighter-rouge">useState</code>.</li>
  <li>Apply the dark class - <code class="language-plaintext highlighter-rouge">useEffect</code>.</li>
  <li>Persist dark mode state - <code class="language-plaintext highlighter-rouge">localStorage</code>.</li>
  <li>Style for dark mode with CSS.</li>
</ol>

<p>Here is some sample JS:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">faMoon</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@fortawesome/free-solid-svg-icons</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FontAwesomeIcon</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@fortawesome/react-fontawesome</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isDark</span><span class="p">,</span> <span class="nx">setIsDark</span><span class="p">]</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>

  <span class="kd">const</span> <span class="nx">onClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setIsDark</span><span class="p">(</span><span class="o">!</span><span class="nx">isDark</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">ls</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">dark-mode</span><span class="dl">'</span><span class="p">)</span> <span class="o">??</span> <span class="dl">'</span><span class="s1">false</span><span class="dl">'</span>
    <span class="kd">const</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">ls</span><span class="p">)</span>
    <span class="nx">setIsDark</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span>
  <span class="p">},</span> <span class="p">[])</span>

  <span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="o">!</span><span class="nx">isDark</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">dark-mode</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">""</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">dark-mode</span><span class="dl">'</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">isDark</span><span class="p">))</span>
  <span class="p">},</span>
    <span class="p">[</span><span class="nx">isDark</span><span class="p">]</span>
  <span class="p">)</span>
  
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">app</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">h1</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Dark</span> <span class="nx">Mode</span> <span class="nx">Demo</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>
      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">app__dark-mode-btn icon level-right</span><span class="dl">"</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span> <span class="nx">onClick</span> <span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">FontAwesomeIcon</span> <span class="nx">icon</span><span class="o">=</span><span class="p">{</span> <span class="nx">faMoon</span> <span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>
      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
        <span class="nx">My</span> <span class="nx">content</span> <span class="nx">here</span>
      <span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>      
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note that the first effect runs only on mount and unmount.</p>

<p>And the second runs whenever <code class="language-plaintext highlighter-rouge">isDark</code> changes.</p>

<p>After you have the value from local storage initially, you can use the value that is in React‚Äôs state. And when the user changes the value, you change the value in state using <code class="language-plaintext highlighter-rouge">onClick</code> and change the value in localStorage using the second effect.</p>


        
    </div>
</article>

        </div>
    </main>
<footer class="site-footer h-card">
    <data class="u-url" href="/dev-resources/"></data>

    <div class="wrapper">

        <h2 class="footer-heading">Dev Resources</h2>

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list"><li class="p-name">
                            Michael Currin
                        </li></ul>
            </div>

            <div class="footer-col footer-col-2">
<ul class="social-media-list"><li>
            <a href="https://github.com/MichaelCurrin"><svg class="svg-icon">
                    <use xlink:href="/dev-resources/assets/fractal-social-icons.svg#github"></use>
                </svg> <span class="username">MichaelCurrin</span></a>
        </li></ul>
</div>

            <div class="footer-col footer-col-3">
                <p>Links to tutorials/articles/docs/Wikipedia about programming languages, developers tools and services</p>
            </div>
        </div>

    </div>

</footer>
<a href="https://github.com/MichaelCurrin/dev-resources"
    class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>
